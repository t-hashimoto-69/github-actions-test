name: needs output test

on:
  workflow_call:
    inputs:
      needs:
        required: true
        type: string
jobs:
  test_result_2:
    name: test result 2
    runs-on: ubuntu-latest
    steps:
      - name: test result
        uses: actions/github-script@v7
        with:
          result-encoding: string
          script: |
            console.log("test result 2");
            const needs = ${{ inputs.needs }};
            console.log(needs);
            const test_result = Object.keys(needs).map(jobId => needs[jobId].outputs.test_result);
            console.log(test_result);
